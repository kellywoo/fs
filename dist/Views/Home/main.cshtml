@using System.Data;
@using mtopt.model;
@using mtopt.logic;
@using mtopt.model.EntitySales;
@{
    ViewBag.Title = Basis.Parse.Localization("com_cashierest");
    Layout = "~/Views/Shared/mst_main.cshtml";

    IEnumerable<stockmarket_type> StockmarketTypes = ViewBag.StockmarketTypes;
    IEnumerable<news> News = ViewBag.News;//ViewBag.CusNews
    news FirstNew = Business.News.GetFirst();

}
@section head{
    <style type="text/css">
        /*登录样式*/
         .form-login-register {width: 350px;margin-left: auto;margin-right: auto;height: 394px;background: #fff;padding: 45px 45px 20px 45px;position: absolute;top: 65px;right: 0px;background-color: rgba(0, 0, 0, 0.3)}
         .form-login-register h1 {color: #e9504a;margin: 0 0 45px 0;}
         .form-login-register .form-control, .form-login-register .form-control:focus {border: none;box-shadow: none;border-bottom: 1px solid #d1d1d1;border-radius: 0;height: 45px;}
         .form-login-register.login input[type=password] {margin-bottom: 50px;}
         .form-login-register p {font-size: 12px;color: #999;margin-top: 20px;margin-bottom: 15px;}
         .form-login-register p a {color: #e9504a;}
         .form-login-register.register, .form-login-register.reset-password {height: 555px;margin-top: 37px;}
         .form-login-register #sendSms {top: 7px;right: 0;}
         .form-login-register.reset-password button[type=submit] {margin-top: 55px;}
        /*广告样式*/
        .index-banner {}
        .index-banner-slogan{text-align: center;color: #fff;margin: 0px 0px 30px 0px;}
        /*版权样式*/
        .mn-company{background:#fff;padding:20px 0 20px 0;border-bottom:1px solid #f5f5f5;}
        .mn-company .mn-company-title{margin-bottom:30px;text-align:center;}
        .mn-company .mn-company-dec{margin-bottom:60px;text-align:center;}
        .mn-company .mn-company-item{margin:20px 0}
        .mn-company .mn-company-item h4:first-child{margin-top:28px}
        .mn-company .table-select:hover{background:#E8E8E8;cursor:pointer;}
        /*公告新闻*/
        .news_box{height:150px;margin:0 auto;font-size:12px;line-height:28px;padding-bottom: 10px;}
        .news-help{width:31%;float:left;margin-left:20px;background:#fff;height:120px;}
        .news-help .news-img{float:left;width:50%;text-align:center;}
        .news-img img{width:100px;margin:5% auto;}
        .news-help .news-text{float:left;width:50%;margin-top:5%;}
        .news-help h3{font-size:16px;margin:10px auto}
        .news_w a:hover{color:#e55600}
        /*联系方式*/
        .bg_w{background:#fff;border-bottom: 1px dotted #e8e8e8;width:1200px;padding-bottom: 10px;margin: 0 auto;}
        .web_service{padding:45px 0 53px 0}
        .web_service li{float:left;height:40px;}
        .web_service li:nth-child(1){width: 490px!important;}
        .web_service li:nth-child(2){width: 492px;}
        .web_service_pic{float:left;width:60px;height:50px;opacity: 0.9;margin-top: -5px;}
        .web_service_pic_num{float:left;font-size:12px;color:#888;}
        .web_service_pic_num p{font-size:18px;color:#e55600}
        .service_1{background:url(/images/service.png?v=5) no-repeat left 0px / 50px auto;}
        .service_2{background:url(/images/service.png?v=5) no-repeat left -50px / 50px auto;}
        .service_3{background:url(/images/service.png?v=5) no-repeat left -100px / 50px auto;}
        .service_4{background:url(/images/service.png?v=5) no-repeat left -150px / 50px auto;}
        .qqsecvice{background:url(/images/service.png?v=5) no-repeat left -160px / 40px auto;padding-left:19px;height:17px}
        .service_4{position:relative}
        /*资质样式*/
        .safety-tips{background:#fff;width:100%;padding-bottom:39px;text-align:center;color:#333;text-align:center;height:320px}
        .safety-tip h3{line-height:34px;font-size:24px;margin-bottom:50px}
        .safety-tips-ul{padding-bottom:28px}
        .safety-tips-ul li{float:left;width:25%;text-align:center}
        .safety-tips-ul li h4{height:34px;margin-top:8px;font-size:16px;line-height:34px}
        .safety-tips-ul li p{text-align:left;line-height:20px;font-size:12px;width:204px;margin:0 auto;color:#646464}
        /*友情链接*/
        .link{text-align:center;background:white;height:120px}
        .link a:hover{color:#e55600}
        .linkbox{width:1200px;margin:0 auto;border-top:1px dotted #e8e8e8;padding-top:30px}
        .linkbox h4{text-align:left;font-size:14px;font-weight:normal}
        .linkbox ul li{float:left;margin:5px 12px 0px 0px}
        .linkbox ul li a{font-size:12px}
        /**/
        .mn-cusblock{float:left;width:49%;border: 2px dotted #d7d9db;height:250px;margin-left:1%;margin-right:1%;}
        .mn-cusblock-title{border-bottom: 1px solid #ddd;}
        .mn-cusblock-title h3{margin-left:2%}
        .mn-cusblock-li li{list-style:disc}
        .mn-cusblock-btn{width:50%;float:left;height:80px}
        .mn-cusblock-btn img{width:64px;margin-left:5%;margin-top:5%;}
        .mn-cusblock-btn a{vertical-align: -webkit-baseline-middle}
    </style>
}
<div class="index-banner">
    @if (Basis.Session.IsLogin == false)
    {
        <div class="mn-container" style="z-index:999;">
            <form class="form-login-register login">
                <h1 class="center">@Basis.Parse.Localization("main_notice")</h1>
                <div class="form-group">
                    <input type="text" id="memberid" class="form-control" placeholder="@Basis.Parse.Localization("user_id")">
                </div>
                <div class="form-group">
                    <input type="password" id="password" class="form-control" placeholder="@Basis.Parse.Localization("user_pw")">
                </div>
                <a class="btn btn-orange btn-block btn-lg" id="btn_login">@Basis.Parse.Localization("user_login")</a>
                <p class="center">
                    <a href="~/User/register">@Basis.Parse.Localization("user_signup") </a> | <a href="/User/find">@Basis.Parse.Localization("user_find_pw")</a>
                </p>
            </form>
        </div>
    }
    <div class="query-banner" style="height:490px;width:100%">
        <ul class="">
            @foreach (news New in News)
            {
                <li><a target="_blank" href="@Href(Basis.Url.ToNewsUrl(New.id))" style="background:url('@Href(Basis.ContentDB.GetStreamUrl(New.icon, 60))')no-repeat center;background-size:cover;"></a></li>
            }
        </ul>
        <div class="left-btn"></div>
        <div class="right-btn"></div>
        <div class="img-btn-list"></div>
    </div>
</div>
<div style="text-align:center;height:25px;line-height:25px;font-size:13px;margin: 0 auto;background-color: #fcf8e3;color: #e55600;"><a href="@Href(Basis.Url.ToNewsUrl(FirstNew.id))" target="_blank">@(Basis.Parse.ToLanguage(FirstNew.title))【@(FirstNew.addtime.ToString("yyyy/MM/dd"))】</a></div>
<div class="mn-company" style="min-height:300px;padding-top:0px;">
    <div style="width:100%;background:#868c93;height:35px;position:absolute"></div>
    <div class="mn-container">
        <table style="width:100%;">
            <thead>
                <tr style="color:#fff;height:35px;">
                    <td style="width:150px;text-align:center;">@Basis.Parse.Localization("key14") </td>
                    <td>@Basis.Parse.Localization("com_current_price") </td>
                    <td>@Basis.Parse.Localization("main_amount_24") </td>
                    <td>@Basis.Parse.Localization("main_price_24") </td>
                    <td>@Basis.Parse.Localization("main_max_24") </td>
                    <td>@Basis.Parse.Localization("main_min_24") </td>
                    <td style="width:60px;">@Basis.Parse.Localization("main_diff_24")</td>
                </tr>
            </thead>
            <tbody>
                @foreach (stockmarket_type TypeData in StockmarketTypes)
                {
                    <tr class="table-select" style="height:40px;line-height:40px;" onclick="m.redirect('/Stock/main?type=@(TypeData.id)')">
                        <td style="text-align:center;"><img src="@(TypeData.icon)" style="width:18px;"> @Basis.Parse.ToLanguage(TypeData.name) (@TypeData.code)</td>
                        <td class="stock-type-@(TypeData.id)-price">@TypeData.today_price_new.ToString("0.00000000")</td>
                        <td class="stock-type-@(TypeData.id)-amount">@TypeData.today_deal_amount.ToString("0.0000")</td>
                        <td class="stock-type-@(TypeData.id)-money">@TypeData.today_deal_money.ToString("0.00")</td>
                        <td class="stock-type-@(TypeData.id)-maxprice">@TypeData.today_price_max.ToString("0.00000000")</td>
                        <td class="stock-type-@(TypeData.id)-minprice">@TypeData.today_price_min.ToString("0.00000000")</td>
                        <td>
                            @if (TypeData.today_deal_rise >= 0)
                            {
                                <span class="stock-type-@(TypeData.id)-rise red">+@TypeData.today_deal_rise.ToString("0.00")%</span>
                            }
                            else
                            {
                                <span class="stock-type-@(TypeData.id)-rise green">@TypeData.today_deal_rise.ToString("0.00")%</span>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    </div>

<div class="mn-container">
    <div class="" style="margin:3% auto; height:250px;">
        <div class="mn-cusblock" style="margin-left:0px;">
            <div class="mn-cusblock-title">
                <h3>@Basis.Parse.Localization("main_notice")&nbsp;&nbsp;|&nbsp;&nbsp;@Basis.Parse.Localization("main_event") </h3>
            </div>
            <div style="margin-left:5%;margin-top:2%;">
                <ul class="mn-cusblock-li">
                    @foreach (news NoticeNew in Business.News.Gets("deal-notice"))
                    {
                        <li><a target="_blank" href="@Href(Basis.Url.ToNewsUrl(NoticeNew.id))">@Basis.Parse.ToLanguage(NoticeNew.title)</a></li>

                    }

                </ul>
            </div>
        </div>
        <div class="mn-cusblock" style="margin-right:0px;">
            <div class="mn-cusblock-title">
                <h3>@Basis.Parse.Localization("main_first_time")？</h3>
            </div>
            <div>
                <div class="mn-cusblock-btn"><img src="~/Images/member.png" /> <a href="~/User/register">@Basis.Parse.Localization("user_signup")</a></div>
                <div class="mn-cusblock-btn"><img src="~/Images/login.png" /><a href="/User/login">@Basis.Parse.Localization("main_login")</a></div>
                <div class="mn-cusblock-btn"><img src="~/Images/verify.png" /><a href="~/User/real">@Basis.Parse.Localization("user_identify")</a></div>
                <div class="mn-cusblock-btn"><img src="~/Images/life.png" /><a>@Basis.Parse.Localization("main_try_coin")</a></div>

            </div>
        </div>

    </div>
</div>
<div class="mn-container" style="border-top:1px solid #ddd;">
    <h3 style="text-align:center;"> @Basis.Parse.Localization("main_need_help")？</h3>
    <div class="news_box">
        <span class="news-help">
            <ul class="pp_list">
                <li>
                    <div class="news-img" style="">
                        <img src="~/Images/phone.png" />
                    </div>
                    <div class="news-text">
                        <a href="~/Notice/detail?codeid=deal-guide">@Basis.Parse.Localization("main_guide")</a><br />
                        <a>1644-7931</a><br />
                        <a>@Basis.Parse.Localization("com_workday") 10:00~17:00</a>

                    </div>

                </li>
            </ul>
        </span>
        <span class="news-help">
            <ul class="pp_list">

                <li>
                    <div class="news-img">
                        <img src="~/Images/talk.png" />
                    </div>
                    <div class="news-text">
                        <a>KaKaotalk @Basis.Parse.Localization("main_consult")</a><br /><a>help@cashierest.com</a><br /><a>@Basis.Parse.Localization("com_workday") 10:00~17:00</a>
                    </div>

                </li>

            </ul>
        </span>
        <span class="news-help">
            <ul class="pp_list">
                <li>
                    <div class="news-img">
                        <img src="~/Images/naver.png" />
                    </div>
                    <div class="news-text">
                        <a>Naver @Basis.Parse.Localization("main_naver_cafe")</a><br /><a>@Basis.Parse.Localization("main_naver_cafe_desc")</a>
                    </div>
                </li>

            </ul>
        </span>
    </div>
</div>
<input type="hidden" id="auto_update" />
<script type="text/javascript">
    var pck = {
        init: function () {
            bannerListFn(
                $(".query-banner"),
                $(".img-btn-list"),
                $(".left-btn"),
                $(".right-btn"),
                2000,
                true
            );
            window.onresize = function () {
                $(".query-banner li").width($(window).width());
            }
            m.node(".mn-menu-home").addClass("active");
        }
    }
    pck.init();
    $(function () {
        m.node("#btn_login").click(function () {
            engine.news("@Basis.Parse.Localization("login_checking")", 99999);
            var memberid = m.node("#memberid").value();
            var password = m.node("#password").value();
            if (memberid.length <= 0) {
                engine.news("@Basis.Parse.Localization("login_enter_id")", 1800);
                return;
            }
            if (password.length <= 0) {
                engine.news("@Basis.Parse.Localization("com_enter_pw")", 1800);
                return;
            }
            var ajax = m.ajax("@Href("~/User/api_login_submit")", null, function (obj) {
                var jso = m.json.getObject(obj);
                if (jso.Success == true) {
                    engine.news("@Basis.Parse.Localization("welcome_login")", 99999);
                    if (m.queryString("url") != null) {
                        m.redirect(m.encry.url.decode(m.queryString("url")));
                    }
                    else {
                        m.redirect("@Href("~/Home/main")");
                    }
                }
                else {
                    if (jso.Error == -10003) {
                        engine.news("@Basis.Parse.Localization("com_vcode_wrong")", 1800);
                    }
                    else if (jso.Error == -10001) {
                        engine.news("@Basis.Parse.Localization("login_failed")", 1800);
                    }
                    else {
                        engine.news(jso.Data, 3000);
                    }
                }
            });
            ajax.data.add("memberid", memberid);
            ajax.data.add("password", password);
            ajax.send();
        });
        $(window).resize();
    });
</script>
